{
  "id": "snapshot_1762521927853_02hud1vmx",
  "approvalId": "approval_1762521927850_n5i7wh5me",
  "approvalTitle": "Tech Steering Document (tech.md)",
  "version": 1,
  "timestamp": "2025-11-07T13:25:27.853Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Technology Stack\n\n## Project Type\nFull-stack web application built with Next.js, providing server-side rendering and API routes for event management and QR code-based check-in functionality.\n\n## Core Technologies\n\n### Primary Language(s)\n- **Language**: TypeScript 5.8.2\n- **Runtime**: Node.js (via Next.js)\n- **Package Manager**: pnpm 10.20.0\n- **Module System**: ESM (ES Modules)\n\n### Key Dependencies/Libraries\n\n**Frontend Framework:**\n- **Next.js 15.2.3**: React-based framework providing SSR, routing, and API routes with App Router architecture\n- **React 19.0.0**: UI component library for building interactive interfaces\n- **React DOM 19.0.0**: DOM-specific rendering methods\n\n**Styling:**\n- **Tailwind CSS 4.0.15**: Utility-first CSS framework for rapid UI development\n- **@tailwindcss/postcss 4.0.15**: PostCSS integration for Tailwind\n- **Geist Font**: Modern sans-serif font from Vercel\n\n**Database & ORM:**\n- **Drizzle ORM 0.41.0**: TypeScript-first ORM for type-safe database operations\n- **postgres 3.4.4**: PostgreSQL client library for Node.js\n- **drizzle-kit 0.30.5**: CLI tools for schema migrations and studio\n\n**Validation & Environment:**\n- **Zod 3.24.2**: TypeScript-first schema validation library\n- **@t3-oss/env-nextjs 0.12.0**: Type-safe environment variable management\n\n### Application Architecture\n**Pattern**: Server-first architecture with Next.js App Router\n- **Server Components**: Default for data fetching and static content rendering\n- **Server Actions**: For form submissions and mutations (planned for event creation/registration)\n- **Client Components**: For interactive features (QR scanner, check-in dashboard)\n- **API Routes**: RESTful endpoints for check-in operations and attendee management\n- **File-based Routing**: Next.js App Router convention in `src/app/`\n\n### Data Storage\n- **Primary Storage**: PostgreSQL (cloud-hosted, accessed via DATABASE_URL)\n- **ORM Layer**: Drizzle ORM with type-safe schema definitions\n- **Schema Prefix**: `event-checkin_*` for multi-tenant database support\n- **Data Formats**: JSON for API responses, structured relational data in PostgreSQL\n- **Migrations**: Drizzle Kit for schema generation and migration management\n\n### External Integrations\n- **Authentication**: Clerk (planned integration per README)\n- **QR Code Generation**: To be implemented for ticket generation\n- **QR Code Scanning**: Client-side camera API or dedicated library for check-in\n- **Protocols**: HTTP/REST for API communication\n\n### Monitoring & Dashboard Technologies\n- **Dashboard Type**: Web-based responsive interface (planned check-in dashboard)\n- **Real-time Communication**: Initially manual refresh, with potential WebSocket upgrade for live check-in updates\n- **State Management**: React state and Server Components for data flow\n- **Visualization**: Native HTML/CSS for attendee lists and check-in status\n\n## Development Environment\n\n### Build & Development Tools\n- **Build System**: Next.js built-in build pipeline (Turbopack in dev mode)\n- **Package Management**: pnpm with lockfile for reproducible builds\n- **Development Workflow**:\n  - `pnpm dev --turbo`: Hot module replacement with Turbopack\n  - `pnpm build`: Production build\n  - `pnpm preview`: Local production preview\n\n### Code Quality Tools\n- **Static Analysis**:\n  - ESLint 9.23.0 with Next.js config\n  - TypeScript compiler in strict mode\n  - eslint-plugin-drizzle for ORM best practices\n  - typescript-eslint 8.27.0 for TypeScript-specific linting\n- **Formatting**:\n  - Prettier 3.5.3 with caching\n  - prettier-plugin-tailwindcss 0.6.11 for class sorting\n- **Type Checking**:\n  - `tsc --noEmit` for standalone type checks\n  - Strict mode enabled with `noUncheckedIndexedAccess`\n- **Testing Framework**: Not yet configured (future consideration)\n\n### Version Control & Collaboration\n- **VCS**: Git\n- **Branching Strategy**: Main branch for development (standard GitHub Flow)\n- **Current Branch**: main\n- **Code Review Process**: To be established based on team preferences\n\n### Database Development\n- **Schema Management**: Drizzle Kit CLI tools\n  - `pnpm db:generate`: Generate migration files from schema\n  - `pnpm db:migrate`: Run migrations\n  - `pnpm db:push`: Direct schema push for development\n  - `pnpm db:studio`: Visual database browser\n\n## Deployment & Distribution\n- **Target Platform**: Cloud-based web hosting (Vercel recommended for Next.js)\n- **Distribution Method**: SaaS - users access via web browser\n- **Installation Requirements**:\n  - Modern web browser (Chrome, Firefox, Safari, Edge)\n  - Mobile device camera for QR scanning (check-in staff)\n- **Environment Variables**:\n  - `DATABASE_URL`: PostgreSQL connection string\n  - Validated at build time via @t3-oss/env-nextjs\n\n## Technical Requirements & Constraints\n\n### Performance Requirements\n- **Page Load Time**: <2 seconds for initial page load\n- **API Response Time**: <500ms for check-in operations\n- **Mobile Performance**: Optimized for 3G/4G network conditions\n- **QR Scan Speed**: <2 seconds from scan to validation\n\n### Compatibility Requirements\n- **Browser Support**: Modern evergreen browsers (Chrome, Firefox, Safari, Edge - last 2 versions)\n- **Mobile Support**: iOS Safari, Android Chrome\n- **Node.js Version**: Compatible with Next.js 15 requirements\n- **TypeScript**: ES2022 target with DOM APIs\n- **Database**: PostgreSQL 12+ (Drizzle ORM compatibility)\n\n### Security & Compliance\n- **Authentication**: Clerk integration for user authentication and session management\n- **Environment Validation**: Type-safe environment variables prevent configuration errors\n- **SQL Injection Prevention**: Drizzle ORM parameterized queries\n- **Input Validation**: Zod schemas for runtime type safety\n- **Unique Check-in**: QR code validation to prevent duplicate entries\n- **Data Protection**: HTTPS-only in production\n\n### Scalability & Reliability\n- **Expected Load**:\n  - Initial: Single events with <500 attendees\n  - Growth: Multiple concurrent events with 1000+ attendees each\n- **Availability Requirements**: 99.5% uptime during active events\n- **Database Scaling**: Connection pooling via postgres library\n- **Horizontal Scaling**: Stateless Next.js allows multi-instance deployment\n\n## Technical Decisions & Rationale\n\n### Decision Log\n\n1. **Next.js App Router over Pages Router**: Modern paradigm with Server Components for better performance and developer experience. Enables server-first architecture with progressive enhancement.\n\n2. **Drizzle ORM over Prisma**: TypeScript-first ORM with better performance, smaller bundle size, and more flexible SQL generation. Better suited for projects requiring direct SQL control.\n\n3. **Tailwind CSS over CSS-in-JS**: Utility-first approach enables rapid UI development with consistent design system. Better performance than runtime CSS-in-JS solutions.\n\n4. **pnpm over npm/yarn**: Faster installs, better disk space efficiency with content-addressable storage, and strict dependency resolution prevents phantom dependencies.\n\n5. **@t3-oss/env-nextjs for Environment Management**: Type-safe environment variables catch configuration errors at build time rather than runtime. Validates schema before deployment.\n\n6. **PostgreSQL Database**: Proven reliability for relational data, strong ACID guarantees for check-in transactions, excellent support for concurrent operations.\n\n7. **T3 Stack Foundation**: Scaffolded with create-t3-app for opinionated, type-safe full-stack architecture with modern best practices.\n\n## Known Limitations\n\n- **No Real-time Updates (Day 1)**: Check-in dashboard requires manual refresh. WebSocket integration planned for future iterations to enable live attendance updates across multiple check-in stations.\n\n- **No Testing Infrastructure**: Unit and integration testing frameworks not yet configured. Should be added before production deployment.\n\n- **Single-tenant Architecture**: Current schema supports one organization. Multi-tenancy with org isolation would require additional schema changes.\n\n- **No Offline Support**: Check-in requires active internet connection. Progressive Web App (PWA) features could enable offline queue for check-ins.\n\n- **No CDN for Assets**: Static assets served from Next.js server. CDN integration would improve global performance.\n",
  "fileStats": {
    "size": 8254,
    "lines": 169,
    "lastModified": "2025-11-07T13:25:16.719Z"
  },
  "comments": []
}